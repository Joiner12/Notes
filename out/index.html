
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>bluepy 0.9.11 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="#">bluepy 0.9.11 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">bluepy 0.9.11 documentation</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="bluepy-a-bluetooth-le-interface-for-python">
<h1><code class="docutils literal notranslate"><span class="pre">bluepy</span></code> - a Bluetooth LE interface for Python<a class="headerlink" href="#bluepy-a-bluetooth-le-interface-for-python" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">bluepy</span></code> is a Python module which allows communication with Bluetooth Low
Energy devices. The current implementation runs on Linux
(internally it uses code from the <a class="reference external" href="http://www.bluez.org/">BlueZ project</a>), although it can be ported to other
platforms.</p>
<p>To browse the API documentation, it is recommended to start with <a class="reference internal" href="index.html#peripheral"><span class="std std-ref">The Peripheral class</span></a>.</p>
<p>Contents:</p>
<div class="toctree-wrapper compound">
<span id="document-peripheral"></span><div class="section" id="the-peripheral-class">
<span id="peripheral"></span><h2>The <code class="docutils literal notranslate"><span class="pre">Peripheral</span></code> class<a class="headerlink" href="#the-peripheral-class" title="Permalink to this headline">¶</a></h2>
<p>Bluepy’s <code class="docutils literal notranslate"><span class="pre">Peripheral</span></code> class encapsulates a connection to a Bluetooth LE peripheral. You create a <code class="docutils literal notranslate"><span class="pre">Peripheral</span></code> object directly by specifying its MAC address; when the connection is established, the services and characteristics offered by that device can be discovered and read or written.</p>
<div class="section" id="constructor">
<h3>Constructor<a class="headerlink" href="#constructor" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="Peripheral">
<code class="sig-name descname">Peripheral</code><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param">deviceAddr=None</em><span class="optional">[</span>, <em class="sig-param">addrType=ADDR_TYPE_PUBLIC</em><span class="optional">[</span>, <em class="sig-param">iface=None</em><span class="optional">[</span>, <em class="sig-param">timeout=None</em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#Peripheral" title="Permalink to this definition">¶</a></dt>
<dd><p>If <em>deviceAddr</em> is not <code class="docutils literal notranslate"><span class="pre">None</span></code>, creates a <code class="docutils literal notranslate"><span class="pre">Peripheral</span></code> object and makes a connection
to the device indicated by <em>deviceAddr</em>. <em>deviceAddr</em> should be a string comprising six hex
bytes separated by colons, e.g. <code class="docutils literal notranslate"><span class="pre">&quot;11:22:33:ab:cd:ed&quot;</span></code>.</p>
<p>If <em>deviceAddr</em> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, creates an un-connected <code class="docutils literal notranslate"><span class="pre">Peripheral</span></code> object. You must call the <code class="docutils literal notranslate"><span class="pre">connect()</span></code> method on this object (passing it a device address) before it will be usable.</p>
<p>The <em>addrType</em> parameter can be used to select between fixed (<code class="docutils literal notranslate"><span class="pre">btle.ADDR_TYPE_PUBLIC</span></code>)
and random (<code class="docutils literal notranslate"><span class="pre">btle.ADDR_TYPE_RANDOM</span></code>) address types, depending on what the target
peripheral requires. See section 10.8 of the Bluetooth 4.0 specification for more
details.</p>
<p>The <em>iface</em> parameter allows the Bluetooth interface on which to make the connection to be set.
On Linux, 0 means <em>/dev/hci0</em>, 1 means <em>/dev/hci1</em> and so on.</p>
<p>The <em>timeout</em> parameter (in seconds) can be used to limit the hang time for trying to connect to device.</p>
<p><em>deviceAddr</em> may also be a <code class="docutils literal notranslate"><span class="pre">ScanEntry</span></code> object. In this case the device address,
address type, and interface number are all taken from the <code class="docutils literal notranslate"><span class="pre">ScanEntry</span></code> values, and
the <em>addrType</em> and <em>iface</em> parameters are ignored.</p>
<p>The constructor will throw a <code class="docutils literal notranslate"><span class="pre">BTLEException</span></code> if connection to the device fails.</p>
</dd></dl>

</div>
<div class="section" id="instance-methods">
<h3>Instance Methods<a class="headerlink" href="#instance-methods" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="connect">
<code class="sig-name descname">connect</code><span class="sig-paren">(</span><em class="sig-param">addr</em><span class="optional">[</span>, <em class="sig-param">addrType=ADDR_TYPE_PUBLIC</em><span class="optional">[</span>, <em class="sig-param">iface=None</em><span class="optional">[</span>, <em class="sig-param">timeout=None</em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a connection to the device indicated by <em>addr</em>, with address type
<em>addrType</em> and interface number <em>iface</em> and a timeout parameter <em>timeout</em> (see the <code class="docutils literal notranslate"><span class="pre">Peripheral</span></code> constructor for details).
You should only call
this method if the <code class="docutils literal notranslate"><span class="pre">Peripheral</span></code> is un-connected (i.e. you did not pass a <em>addr</em>
to the constructor); a given peripheral object cannot be re-connected once connected.</p>
</dd></dl>

<dl class="py function">
<dt id="disconnect">
<code class="sig-name descname">disconnect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#disconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Drops the connection to the device, and cleans up associated OS resources. Although the
Python destructor for a <code class="docutils literal notranslate"><span class="pre">Peripheral</span></code> will attempt to call this method, you should not
rely on this happening at any particular time. Therefore, always explicitly call
<code class="docutils literal notranslate"><span class="pre">disconnect()</span></code> if you have finished communicating with a device.</p>
</dd></dl>

<dl class="py function">
<dt id="getState">
<code class="sig-name descname">getState</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#getState" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a string indicating device state. Possible states are: “conn” - connected,
“disc” - disconnected, “scan” scanning and “tryconn” - connecting.</p>
</dd></dl>

<dl class="py function">
<dt id="getServices">
<code class="sig-name descname">getServices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#getServices" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of <code class="docutils literal notranslate"><span class="pre">Service</span></code> objects representing the services offered by the peripheral.
This will perform Bluetooth service discovery if this has not already been done;
otherwise it will return a cached list of services immediately.</p>
<p>On Python 3.x, this returns a <em>dictionary view</em> object, not a list.</p>
</dd></dl>

<dl class="py function">
<dt id="getServiceByUUID">
<code class="sig-name descname">getServiceByUUID</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">uuidVal</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getServiceByUUID" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an instance of a <code class="docutils literal notranslate"><span class="pre">Service</span></code> object which has the indicated UUID.
<code class="docutils literal notranslate"><span class="pre">uuidVal</span></code> can be a <code class="docutils literal notranslate"><span class="pre">UUID</span></code> object, or any string or integer which can be
used to construct a <code class="docutils literal notranslate"><span class="pre">UUID</span></code> object. The method will return immediately if the
service was previously discovered (e.g. by <em>getServices()</em>), and will query
the peripheral otherwise. It raises a <em>BTLEEException</em> if the service is not
found.</p>
</dd></dl>

<dl class="py function">
<dt id="getCharacteristics">
<code class="sig-name descname">getCharacteristics</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">startHnd</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">endHnd</span><span class="o">=</span><span class="default_value">65535</span></em>, <em class="sig-param"><span class="n">uuid</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getCharacteristics" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list containing <code class="docutils literal notranslate"><span class="pre">Characteristic</span></code> objects for the peripheral. If no
arguments are given, will return all characteristics. If <em>startHnd</em> and/or
<em>endHnd</em> are given, the list is restricted to characteristics whose handles are
within the given range - note that it’s usually more convenient to use
<code class="docutils literal notranslate"><span class="pre">Service.getCharacteristics()</span></code> to get the characteristics associated with
a particular service. Alternatively, <em>uuid</em> may be specified to locate a
characteristic with a particular UUID value. <em>uuid</em> may be any string, integer,
or <code class="docutils literal notranslate"><span class="pre">UUID</span></code> type which can be used to construct a <code class="docutils literal notranslate"><span class="pre">UUID</span></code> object.</p>
<p>If no matching characteristics are found, returns an empty list.</p>
</dd></dl>

<dl class="py function">
<dt id="getDescriptors">
<code class="sig-name descname">getDescriptors</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">startHnd</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">endHnd</span><span class="o">=</span><span class="default_value">65535</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getDescriptors" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list containing <code class="docutils literal notranslate"><span class="pre">Descriptor</span></code> objects for the peripheral. If no
arguments are given, will return all descriptors. If <em>startHnd</em> and/or
<em>endHnd</em> are given, the list is restricted to descriptors whose handles are
within the given range. Again, it’s usually more convenient to use
<code class="docutils literal notranslate"><span class="pre">Service.getDescriptors()</span></code> to get the descriptors associated with
a particular service.</p>
<p>If no matching descriptors are found, returns an empty list.</p>
</dd></dl>

<dl class="py function">
<dt id="withDelegate">
<code class="sig-name descname">withDelegate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">delegate</span></em><span class="sig-paren">)</span><a class="headerlink" href="#withDelegate" title="Permalink to this definition">¶</a></dt>
<dd><p>This stores a reference to a “delegate” object, which is called when asynchronous
events such as Bluetooth notifications occur. This should be a subclass of the
<code class="docutils literal notranslate"><span class="pre">DefaultDelegate</span></code> class. See <a class="reference internal" href="index.html#notifications"><span class="std std-ref">Working with notifications</span></a> for more information. This
method returns the <code class="docutils literal notranslate"><span class="pre">Peripheral</span></code> object.</p>
</dd></dl>

<dl class="py function">
<dt id="setDelegate">
<code class="sig-name descname">setDelegate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">delegate</span></em><span class="sig-paren">)</span><a class="headerlink" href="#setDelegate" title="Permalink to this definition">¶</a></dt>
<dd><p><em>(deprecated since 0.9.10)</em> Same as <em>withDelegate()</em>.</p>
</dd></dl>

<dl class="py function">
<dt id="waitForNotifications">
<code class="sig-name descname">waitForNotifications</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span></em><span class="sig-paren">)</span><a class="headerlink" href="#waitForNotifications" title="Permalink to this definition">¶</a></dt>
<dd><p>Blocks until a notification is received from the peripheral, or until the
given <em>timeout</em> (in seconds) has elapsed. If a notification is received, the
delegate object’s <code class="docutils literal notranslate"><span class="pre">handleNotification()</span></code> method will be called, and
<code class="docutils literal notranslate"><span class="pre">waitForNotifications()</span></code> will then return <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>If nothing is received before the timeout elapses, this will return <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt id="writeCharacteristic">
<code class="sig-name descname">writeCharacteristic</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">handle</span></em>, <em class="sig-param"><span class="n">val</span></em>, <em class="sig-param"><span class="n">withResponse</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#writeCharacteristic" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the data <em>val</em> (of type <code class="docutils literal notranslate"><span class="pre">str</span></code> on Python 2.x, <code class="docutils literal notranslate"><span class="pre">byte</span></code> on 3.x) to the
characteristic identified by handle <em>handle</em>, which should be an integer in the
range 1 to 65535. This is useful if you know a characteristic’s GATT handle,
but do not have a <code class="docutils literal notranslate"><span class="pre">Characteristic</span></code> object.</p>
<p>If <em>withResponse</em> is true, will await confirmation that the write was successful
from the device.</p>
</dd></dl>

<dl class="py function">
<dt id="readCharacteristic">
<code class="sig-name descname">readCharacteristic</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">handle</span></em><span class="sig-paren">)</span><a class="headerlink" href="#readCharacteristic" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the current value of the characteristic identified by <em>handle</em>. This is
useful if you know the handle for the characteristic but do not have a suitable
<code class="docutils literal notranslate"><span class="pre">Characteristic</span></code> object.</p>
</dd></dl>

</div>
<div class="section" id="properties">
<h3>Properties<a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h3>
<p>All the properties listed below are read-only.</p>
<dl class="py attribute">
<dt id="addr">
<code class="sig-name descname">addr</code><a class="headerlink" href="#addr" title="Permalink to this definition">¶</a></dt>
<dd><p>Device MAC address (as a hex string separated by colons).</p>
</dd></dl>

<dl class="py attribute">
<dt id="addrType">
<code class="sig-name descname">addrType</code><a class="headerlink" href="#addrType" title="Permalink to this definition">¶</a></dt>
<dd><p>Device address type - one of <em>ADDR_TYPE_PUBLIC</em> or <em>ADDR_TYPE_RANDOM</em>; this will be a
printable string.</p>
</dd></dl>

<dl class="py attribute">
<dt id="iface">
<code class="sig-name descname">iface</code><a class="headerlink" href="#iface" title="Permalink to this definition">¶</a></dt>
<dd><p>Bluetooth interface number (0 = <code class="docutils literal notranslate"><span class="pre">/dev/hci0</span></code>) used for the connection.</p>
</dd></dl>

</div>
</div>
<span id="document-scanner"></span><div class="section" id="the-scanner-class">
<span id="scanner"></span><h2>The <code class="docutils literal notranslate"><span class="pre">Scanner</span></code> class<a class="headerlink" href="#the-scanner-class" title="Permalink to this headline">¶</a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">Scanner</span></code> object is used to scan for LE devices which are broadcasting
advertising data. In most situations this will give a set of devices which
are available for connection. (Note, however, that Bluetooth LE devices may
accept connections without broadcasting advertising data, or may broadcast
advertising data but may not accept connections).</p>
<div class="section" id="constructor">
<h3>Constructor<a class="headerlink" href="#constructor" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="Scanner">
<code class="sig-name descname">Scanner</code><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param">iface=0</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#Scanner" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates and initialises a new scanner object. <em>iface</em> identifies the
Bluetooth interface to use (where 0 is <strong>/dev/hci0</strong> etc). Scanning
does not start until the <em>start()</em> or <em>scan()</em> methods are called -
see below for details.</p>
</dd></dl>

</div>
<div class="section" id="instance-methods">
<h3>Instance Methods<a class="headerlink" href="#instance-methods" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="withDelegate">
<code class="sig-name descname">withDelegate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">delegate</span></em><span class="sig-paren">)</span><a class="headerlink" href="#withDelegate" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores a reference to a <em>delegate</em> object, which receives callbacks
when broadcasts from devices are received. See the documentation for
<code class="docutils literal notranslate"><span class="pre">DefaultDelegate</span></code> for details.</p>
</dd></dl>

<dl class="py function">
<dt id="scan">
<code class="sig-name descname">scan</code><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param">timeout = 10</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#scan" title="Permalink to this definition">¶</a></dt>
<dd><p>Scans for devices for the given <em>timeout</em> in seconds. During this
period, callbacks to the <em>delegate</em> object will be called. When the
timeout ends, scanning will stop and the method will return a list
(or a <em>view</em> on Python 3.x) of <code class="docutils literal notranslate"><span class="pre">ScanEntry</span></code> objects for all devices
discovered during that time.</p>
<p><em>scan()</em> is equivalent to calling the <em>clear()</em>, <em>start()</em>,
<em>process()</em> and <em>stop()</em> methods in order.</p>
</dd></dl>

<dl class="py function">
<dt id="clear">
<code class="sig-name descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears the current set of discovered devices.</p>
</dd></dl>

<dl class="py function">
<dt id="start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#start" title="Permalink to this definition">¶</a></dt>
<dd><p>Enables reception of advertising broadcasts from peripherals.
Should be called before calling <em>process()</em>.</p>
</dd></dl>

<dl class="py function">
<dt id="process">
<code class="sig-name descname">process</code><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param">timeout = 10</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#process" title="Permalink to this definition">¶</a></dt>
<dd><p>Waits for advertising broadcasts and calls the <em>delegate</em> object
when they are received. Returns after the given <em>timeout</em> period
in seconds. This may be called multiple times (between calls to
<em>start()</em> and <em>stop()</em> ).</p>
</dd></dl>

<dl class="py function">
<dt id="stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Disables reception of advertising broadcasts. Should be called after
<em>process()</em> has returned.</p>
</dd></dl>

<dl class="py function">
<dt id="getDevices">
<code class="sig-name descname">getDevices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#getDevices" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list (a <em>view</em> on Python 3.x) of <code class="docutils literal notranslate"><span class="pre">ScanEntry</span></code> objects for
all devices which have been discovered (since the last <em>clear()</em> call).</p>
</dd></dl>

</div>
<div class="section" id="sample-code">
<h3>Sample code<a class="headerlink" href="#sample-code" title="Permalink to this headline">¶</a></h3>
<p>Basic code to run a LE device scan for 10 seconds follows this example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># import the necessary parts of the bluepy library</span>
<span class="kn">from</span> <span class="nn">bluepy.btle</span> <span class="kn">import</span> <span class="n">Scanner</span><span class="p">,</span> <span class="n">DefaultDelegate</span>

<span class="c1"># create a delegate class to receive the BLE broadcast packets</span>
<span class="k">class</span> <span class="nc">ScanDelegate</span><span class="p">(</span><span class="n">DefaultDelegate</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">DefaultDelegate</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="c1"># when this python script discovers a BLE broadcast packet, print a message with the device&#39;s MAC address</span>
    <span class="k">def</span> <span class="nf">handleDiscovery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dev</span><span class="p">,</span> <span class="n">isNewDev</span><span class="p">,</span> <span class="n">isNewData</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">isNewDev</span><span class="p">:</span>
            <span class="nb">print</span> <span class="s2">&quot;Discovered device&quot;</span><span class="p">,</span> <span class="n">dev</span><span class="o">.</span><span class="n">addr</span>
        <span class="k">elif</span> <span class="n">isNewData</span><span class="p">:</span>
            <span class="nb">print</span> <span class="s2">&quot;Received new data from&quot;</span><span class="p">,</span> <span class="n">dev</span><span class="o">.</span><span class="n">addr</span>

<span class="c1"># create a scanner object that sends BLE broadcast packets to the ScanDelegate</span>
<span class="n">scanner</span> <span class="o">=</span> <span class="n">Scanner</span><span class="p">()</span><span class="o">.</span><span class="n">withDelegate</span><span class="p">(</span><span class="n">ScanDelegate</span><span class="p">())</span>

<span class="c1"># create a list of unique devices that the scanner discovered during a 10-second scan</span>
<span class="n">devices</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="mf">10.0</span><span class="p">)</span>

<span class="c1"># for each device  in the list of devices</span>
<span class="k">for</span> <span class="n">dev</span> <span class="ow">in</span> <span class="n">devices</span><span class="p">:</span>
    <span class="c1"># print  the device&#39;s MAC address, its address type,</span>
    <span class="c1"># and Received Signal Strength Indication that shows how strong the signal was when the script received the broadcast.</span>
    <span class="nb">print</span> <span class="s2">&quot;Device </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">), RSSI=</span><span class="si">%d</span><span class="s2"> dB&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dev</span><span class="o">.</span><span class="n">addr</span><span class="p">,</span> <span class="n">dev</span><span class="o">.</span><span class="n">addrType</span><span class="p">,</span> <span class="n">dev</span><span class="o">.</span><span class="n">rssi</span><span class="p">)</span>

    <span class="c1"># For each of the device&#39;s advertising data items, print a description of the data type and value of the data itself</span>
    <span class="c1"># getScanData returns a list of tupples: adtype, desc, value</span>
    <span class="c1"># where AD Type means “advertising data type,” as defined by Bluetooth convention:</span>
    <span class="c1"># https://www.bluetooth.com/specifications/assigned-numbers/generic-access-profile</span>
    <span class="c1"># desc is a human-readable description of the data type and value is the data itself</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">adtype</span><span class="p">,</span> <span class="n">desc</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="n">dev</span><span class="o">.</span><span class="n">getScanData</span><span class="p">():</span>
        <span class="nb">print</span> <span class="s2">&quot;  </span><span class="si">%s</span><span class="s2"> = </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">desc</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
<p>For continuous scanning, follow this example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># import the necessary parts of the bluepy library</span>
<span class="kn">from</span> <span class="nn">bluepy.btle</span> <span class="kn">import</span> <span class="n">Scanner</span><span class="p">,</span> <span class="n">DefaultDelegate</span>

<span class="c1"># create a delegate class to receive the BLE broadcast packets</span>
<span class="k">class</span> <span class="nc">ScanDelegate</span><span class="p">(</span><span class="n">DefaultDelegate</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">DefaultDelegate</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="c1"># when this python script discovers a BLE broadcast packet, print a message with the device&#39;s MAC address</span>
    <span class="k">def</span> <span class="nf">handleDiscovery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dev</span><span class="p">,</span> <span class="n">isNewDev</span><span class="p">,</span> <span class="n">isNewData</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">isNewDev</span><span class="p">:</span>
            <span class="nb">print</span> <span class="s2">&quot;Discovered device&quot;</span><span class="p">,</span> <span class="n">dev</span><span class="o">.</span><span class="n">addr</span>
        <span class="k">elif</span> <span class="n">isNewData</span><span class="p">:</span>
            <span class="nb">print</span> <span class="s2">&quot;Received new data from&quot;</span><span class="p">,</span> <span class="n">dev</span><span class="o">.</span><span class="n">addr</span>

<span class="c1"># create a scanner object that sends BLE broadcast packets to the ScanDelegate</span>
<span class="n">scanner</span> <span class="o">=</span> <span class="n">Scanner</span><span class="p">()</span><span class="o">.</span><span class="n">withDelegate</span><span class="p">(</span><span class="n">ScanDelegate</span><span class="p">())</span>

<span class="c1"># start the scanner and keep the process running</span>
<span class="n">scanner</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="nb">print</span> <span class="s2">&quot;Still running...&quot;</span>
    <span class="n">scanner</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
</pre></div>
</div>
<p>NOTE that (1) LE scanning must be run as root and (2) the continuous scanning code never completes, so you’ll need to do useful things in the <cite>handleDiscovery()</cite> method of your delegate.</p>
<p>See the documentation for <code class="docutils literal notranslate"><span class="pre">ScanEntry</span></code> for the information available via the <em>dev</em>
parameter passed to the delegate.</p>
</div>
</div>
<span id="document-scanentry"></span><div class="section" id="the-scanentry-class">
<span id="scanentry"></span><h2>The <code class="docutils literal notranslate"><span class="pre">ScanEntry</span></code> class<a class="headerlink" href="#the-scanentry-class" title="Permalink to this headline">¶</a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">ScanEntry</span></code> object contains information received from a Bluetooth LE
device received during <code class="docutils literal notranslate"><span class="pre">Scanner</span></code> operation. This includes parameters
needed to connect to the device (MAC address, address type), and
advertising data (such as its name or available services) supplied in
the device’s broadcasts.</p>
<div class="section" id="constructor">
<h3>Constructor<a class="headerlink" href="#constructor" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">ScanEntry</span></code> objects are created by the <code class="docutils literal notranslate"><span class="pre">Scanner</span></code> class, and should not
be created by the user.</p>
</div>
<div class="section" id="instance-methods">
<h3>Instance Methods<a class="headerlink" href="#instance-methods" title="Permalink to this headline">¶</a></h3>
<dl class="py method">
<dt id="getDescription">
<code class="sig-name descname">getDescription</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">adtype</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getDescription" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a human-readable description of the advertising data ‘type’
code <em>adtype</em>. For instance, an <em>adtype</em> value of 9 would return the
string <code class="docutils literal notranslate"><span class="pre">&quot;Complete</span> <span class="pre">Local</span> <span class="pre">Name&quot;</span></code>. See the Generic Access Profile
assigned numbers at <a class="reference external" href="https://www.bluetooth.com/specifications/assigned-numbers/generic-access-profile/">https://www.bluetooth.com/specifications/assigned-numbers/generic-access-profile/</a>
for a complete list.</p>
</dd></dl>

<dl class="py method">
<dt id="getValueText">
<code class="sig-name descname">getValueText</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">adtype</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getValueText" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a human-readable string representation of the advertising data
for code <em>adtype</em>. Values such as the ‘local name’ are returned as
strings directly; other values are converted to hex strings. If the
requested data is not available, <code class="docutils literal notranslate"><span class="pre">None</span></code> is returned.</p>
</dd></dl>

<dl class="py method">
<dt id="getScanData">
<code class="sig-name descname">getScanData</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#getScanData" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of tuples <em>(adtype, description, value)</em> containing the
AD type code, human-readable description and value (as reported by
<code class="docutils literal notranslate"><span class="pre">getDescription()</span></code> and <code class="docutils literal notranslate"><span class="pre">getValueText()</span></code>) for all available advertising
data items.</p>
</dd></dl>

</div>
<div class="section" id="properties">
<h3>Properties<a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h3>
<p>All the properties listed below are read-only.</p>
<dl class="py attribute">
<dt id="addr">
<code class="sig-name descname">addr</code><a class="headerlink" href="#addr" title="Permalink to this definition">¶</a></dt>
<dd><p>Device MAC address (as a hex string separated by colons).</p>
</dd></dl>

<dl class="py attribute">
<dt id="addrType">
<code class="sig-name descname">addrType</code><a class="headerlink" href="#addrType" title="Permalink to this definition">¶</a></dt>
<dd><p>Device address type - one of <em>ADDR_TYPE_PUBLIC</em> or <em>ADDR_TYPE_RANDOM</em>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="iface">
<code class="sig-name descname">iface</code><a class="headerlink" href="#iface" title="Permalink to this definition">¶</a></dt>
<dd><p>Bluetooth interface number (0 = <code class="docutils literal notranslate"><span class="pre">/dev/hci0</span></code>) on which advertising information was seen.</p>
</dd></dl>

<dl class="py attribute">
<dt id="rssi">
<code class="sig-name descname">rssi</code><a class="headerlink" href="#rssi" title="Permalink to this definition">¶</a></dt>
<dd><p>Received Signal Strength Indication for the last received broadcast from the
device. This is an integer value measured in dB, where 0 dB is the maximum
(theoretical) signal strength, and more negative numbers indicate a weaker signal.</p>
</dd></dl>

<dl class="py attribute">
<dt id="connectable">
<code class="sig-name descname">connectable</code><a class="headerlink" href="#connectable" title="Permalink to this definition">¶</a></dt>
<dd><p>Boolean value - <code class="docutils literal notranslate"><span class="pre">True</span></code> if the device supports connections, and <code class="docutils literal notranslate"><span class="pre">False</span></code>
otherwise (typically used for advertising ‘beacons’).</p>
</dd></dl>

<dl class="py attribute">
<dt id="updateCount">
<code class="sig-name descname">updateCount</code><a class="headerlink" href="#updateCount" title="Permalink to this definition">¶</a></dt>
<dd><p>Integer count of the number of advertising packets received from the device
so far (since <em>clear()</em> was called on the <code class="docutils literal notranslate"><span class="pre">Scanner</span></code> object which found it).</p>
</dd></dl>

</div>
</div>
<span id="document-delegate"></span><div class="section" id="the-defaultdelegate-class">
<span id="delegate"></span><h2>The <code class="docutils literal notranslate"><span class="pre">DefaultDelegate</span></code> class<a class="headerlink" href="#the-defaultdelegate-class" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">bluepy</span></code> functions which receive Bluetooth messages asynchronously -
such as notifications, indications, and advertising data - pass this information
to the user by calling methods on a ‘delegate’ object.</p>
<p>To be useful, the delegate object will be from a class created by the user.
Bluepy’s <code class="docutils literal notranslate"><span class="pre">DefaultDelegate</span></code> is a base class for this - you should override
some or all of the methods here with your own application-specific code.</p>
<div class="section" id="constructor">
<h3>Constructor<a class="headerlink" href="#constructor" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="DefaultDelegate">
<code class="sig-name descname">DefaultDelegate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#DefaultDelegate" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialises the object instance.</p>
</dd></dl>

</div>
<div class="section" id="instance-methods">
<h3>Instance Methods<a class="headerlink" href="#instance-methods" title="Permalink to this headline">¶</a></h3>
<dl class="py method">
<dt id="handleNotification">
<code class="sig-name descname">handleNotification</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cHandle</span></em>, <em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#handleNotification" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a notification or indication is received from a connected
<code class="docutils literal notranslate"><span class="pre">Peripheral</span></code> object. <em>cHandle</em> is the (integer) handle for the
characteristic - this can be used to distinguish between notifications
from multiple sources on the same peripheral. <em>data</em> is the characteristic
data (a <code class="docutils literal notranslate"><span class="pre">str</span></code> type on Python 2.x, and <code class="docutils literal notranslate"><span class="pre">bytes</span></code> on 3.x).</p>
</dd></dl>

<dl class="py method">
<dt id="handleDiscovery">
<code class="sig-name descname">handleDiscovery</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">scanEntry</span></em>, <em class="sig-param"><span class="n">isNewDev</span></em>, <em class="sig-param"><span class="n">isNewData</span></em><span class="sig-paren">)</span><a class="headerlink" href="#handleDiscovery" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when advertising data is received from an LE device while a
<code class="docutils literal notranslate"><span class="pre">Scanner</span></code> object is active. <em>scanEntry</em> contains device information
and advertising data - see the <code class="docutils literal notranslate"><span class="pre">ScanEntry</span></code> class for details. <em>isNewDev</em>
is <code class="docutils literal notranslate"><span class="pre">True</span></code> if the device (as identified by its MAC address) has not been
seen before by the scanner, and <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise. <em>isNewData</em> is <code class="docutils literal notranslate"><span class="pre">True</span></code>
if new or updated advertising data is available.</p>
</dd></dl>

</div>
</div>
<span id="document-uuid"></span><div class="section" id="the-uuid-class">
<h2>The <code class="docutils literal notranslate"><span class="pre">UUID</span></code> class<a class="headerlink" href="#the-uuid-class" title="Permalink to this headline">¶</a></h2>
<div class="section" id="constructor">
<h3>Constructor<a class="headerlink" href="#constructor" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="UUID">
<code class="sig-name descname">UUID</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#UUID" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a <code class="docutils literal notranslate"><span class="pre">UUID</span></code> object with the given <em>value</em>. This may be:</p>
<ul class="simple">
<li><p>an <cite>int</cite> value in the range 0 to 0xFFFFFFFF</p></li>
<li><p>a <cite>str</cite> value</p></li>
<li><p>another <cite>UUID</cite> object</p></li>
<li><p>any other value which can be converted to hex digits using <code class="docutils literal notranslate"><span class="pre">str()</span></code></p></li>
</ul>
</dd></dl>

</div>
<div class="section" id="instance-methods">
<h3>Instance Methods<a class="headerlink" href="#instance-methods" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="getCommonName">
<code class="sig-name descname">getCommonName</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#getCommonName" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns string describing that UUID. If the UUID is one listed
in <a class="reference internal" href="index.html#assignednumbers"><span class="std std-ref">Assigned Numbers</span></a> this will be a human-readable name e.g.
“Cycling Speed and Cadence”. Otherwise, it will be a hexadecimal string.</p>
</dd></dl>

</div>
<div class="section" id="properties">
<h3>Properties<a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h3>
<p>All the properties listed below are read-only.</p>
<dl class="py attribute">
<dt id="binVal">
<code class="sig-name descname">binVal</code><a class="headerlink" href="#binVal" title="Permalink to this definition">¶</a></dt>
<dd><p>The UUID expressed in binary (a <code class="docutils literal notranslate"><span class="pre">str</span></code> object on Python 2.x, <code class="docutils literal notranslate"><span class="pre">bytes</span></code> on 3.x).</p>
</dd></dl>

</div>
</div>
<span id="document-service"></span><div class="section" id="the-service-class">
<span id="service"></span><h2>The <code class="docutils literal notranslate"><span class="pre">Service</span></code> class<a class="headerlink" href="#the-service-class" title="Permalink to this headline">¶</a></h2>
<p>A Bluetooth LE <code class="docutils literal notranslate"><span class="pre">Service</span></code> object represents a collection of <cite>characteristics</cite> and
<cite>descriptors</cite> which are all related to one particular function of the peripheral. This
allows particular characteristics to be discovered without having to enumerate everything offered by that peripheral.</p>
<p>More information about standard services can be found at
<a class="reference external" href="https://www.bluetooth.org/en-us/specification/adopted-specifications">https://www.bluetooth.org/en-us/specification/adopted-specifications</a></p>
<div class="section" id="constructor">
<h3>Constructor<a class="headerlink" href="#constructor" title="Permalink to this headline">¶</a></h3>
<p>You should not construct <code class="docutils literal notranslate"><span class="pre">Service</span></code> objects directly. Instead, use the
<code class="docutils literal notranslate"><span class="pre">getServices()</span></code> or <code class="docutils literal notranslate"><span class="pre">getServiceByUUID()</span></code> methods of a connected <code class="docutils literal notranslate"><span class="pre">Peripheral</span></code> object.</p>
</div>
<div class="section" id="instance-methods">
<h3>Instance Methods<a class="headerlink" href="#instance-methods" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="getCharacteristics">
<code class="sig-name descname">getCharacteristics</code><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param">forUUID=None</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#getCharacteristics" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of <code class="docutils literal notranslate"><span class="pre">Characteristic</span></code> objects associated with the service. If this
has not been done before, the peripheral is queried. Otherwise, a cached list if
returned. If <em>forUUID</em> is given, it may be a <code class="docutils literal notranslate"><span class="pre">UUID</span></code> object or a value used to
construct one.  In this case the returned list, which may be empty, contains any
characteristics associated with the service which match that UUID.</p>
</dd></dl>

</div>
<div class="section" id="properties">
<h3>Properties<a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h3>
<p>All the properties listed below are read-only.</p>
<dl class="py attribute">
<dt id="uuid">
<code class="sig-name descname">uuid</code><a class="headerlink" href="#uuid" title="Permalink to this definition">¶</a></dt>
<dd><p>The Bluetooth <code class="docutils literal notranslate"><span class="pre">UUID</span></code> for this service.</p>
</dd></dl>

<dl class="py attribute">
<dt id="peripheral">
<code class="sig-name descname">peripheral</code><a class="headerlink" href="#peripheral" title="Permalink to this definition">¶</a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">Peripheral</span></code> object for the device to which the service belongs.</p>
</dd></dl>

</div>
</div>
<span id="document-characteristic"></span><div class="section" id="the-characteristic-class">
<span id="characteristic"></span><h2>The <code class="docutils literal notranslate"><span class="pre">Characteristic</span></code> class<a class="headerlink" href="#the-characteristic-class" title="Permalink to this headline">¶</a></h2>
<p>A Bluetooth LE “characteristic” represents a short data item which can be read or
written. These can be fixed (e.g. a string representing the manufacturer name) or
change dynamically (such as the current temperature or state of a button). Most
interaction with Bluetooth LE peripherals is done by reading or writing characteristics.</p>
<div class="section" id="constructor">
<h3>Constructor<a class="headerlink" href="#constructor" title="Permalink to this headline">¶</a></h3>
<p>You should not construct <code class="docutils literal notranslate"><span class="pre">Characteristic</span></code> objects directly. Instead, use the
<code class="docutils literal notranslate"><span class="pre">getCharacteristics()</span></code> method of a connected <code class="docutils literal notranslate"><span class="pre">Peripheral</span></code> object.</p>
</div>
<div class="section" id="instance-methods">
<h3>Instance Methods<a class="headerlink" href="#instance-methods" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="read">
<code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#read" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the current value of a characteristic as a string of bytes. For Python 2.x this
is a value of type <cite>str</cite>, and on Python 3.x this is of type <cite>bytes</cite>. This may be
used with the <cite>struct</cite> module to extract integer values from the data.</p>
</dd></dl>

<dl class="py function">
<dt id="write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="optional">[</span>, <em class="sig-param">withResponse=False</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#write" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the given <em>data</em> to the characteristic. <em>data</em> should be of type <cite>str</cite> for
Python 2.x, and type <cite>bytes</cite> for Python 3.x. Bluetooth LE allows the sender to
request the peripheral to send a response to confirm that the data has been received.
Setting the <em>withResponse</em> parameter to <em>True</em> will make this request. A
<cite>BTLEException</cite> will be raised if the confirmation process fails.</p>
</dd></dl>

<dl class="py function">
<dt id="supportsRead">
<code class="sig-name descname">supportsRead</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#supportsRead" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <em>True</em> if the characteristic can be read (as indicated by its properties)
and <em>False</em> otherwise.</p>
</dd></dl>

<dl class="py function">
<dt id="propertiesToString">
<code class="sig-name descname">propertiesToString</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#propertiesToString" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a string describing the characteristic properties (‘READ’, ‘WRITE’, etc).</p>
</dd></dl>

<dl class="py function">
<dt id="getHandle">
<code class="sig-name descname">getHandle</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#getHandle" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the 16-bit integer value used to identify the characteristic in the
underlying GATT protocol. This may be useful to distinguish between notifications
from different characteristics (see <a class="reference internal" href="index.html#notifications"><span class="std std-ref">Working with notifications</span></a> for further information).</p>
</dd></dl>

</div>
<div class="section" id="properties">
<h3>Properties<a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h3>
<p>All the properties listed below are read-only.</p>
<dl class="py attribute">
<dt id="uuid">
<code class="sig-name descname">uuid</code><a class="headerlink" href="#uuid" title="Permalink to this definition">¶</a></dt>
<dd><p>The Bluetooth <code class="docutils literal notranslate"><span class="pre">UUID</span></code> for this characteristic.</p>
</dd></dl>

<dl class="py attribute">
<dt id="peripheral">
<code class="sig-name descname">peripheral</code><a class="headerlink" href="#peripheral" title="Permalink to this definition">¶</a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">Peripheral</span></code> object for the device to which the characteristic belongs.</p>
</dd></dl>

<dl class="py attribute">
<dt id="id0">
<code class="sig-name descname">properties</code><a class="headerlink" href="#id0" title="Permalink to this definition">¶</a></dt>
<dd><p>A bitmask of properties for the characteristic.</p>
</dd></dl>

</div>
</div>
<span id="document-descriptor"></span><div class="section" id="the-descriptor-class">
<span id="descriptor"></span><h2>The <code class="docutils literal notranslate"><span class="pre">Descriptor</span></code> class<a class="headerlink" href="#the-descriptor-class" title="Permalink to this headline">¶</a></h2>
<p>The Descriptor class is a placeholder. <code class="docutils literal notranslate"><span class="pre">bluepy</span></code> does not currently support any useful operations with descriptors.</p>
</div>
<span id="document-notifications"></span><div class="section" id="working-with-notifications">
<span id="notifications"></span><h2>Working with notifications<a class="headerlink" href="#working-with-notifications" title="Permalink to this headline">¶</a></h2>
<p>In <code class="docutils literal notranslate"><span class="pre">bluepy</span></code>, notifications are processed by creating a “delegate” object and
registering it with the <code class="docutils literal notranslate"><span class="pre">Peripheral</span></code>. A method in the delegate is called whenever
a notification is received from the peripheral, as shown below:</p>
<dl class="py function">
<dt id="handleNotification">
<code class="sig-name descname">handleNotification</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cHandle</span></em>, <em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#handleNotification" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a notification has been received from a <code class="docutils literal notranslate"><span class="pre">Peripheral</span></code>. Normally
you will call the peripheral’s <code class="docutils literal notranslate"><span class="pre">waitForNotifications()</span></code> method to allow this,
but note that a Bluetooth LE device may transmit notifications at any time. This
means that <em>handleNotification()</em> can potentially be called when any BluePy call
is in progress.</p>
<p>The <em>cHandle</em> parameter is the GATT ‘handle’ for the characteristic which is
sending the notification. If a peripheral sends notifications for more than one
characteristic, this may be used to distinguish them. The ‘handle’ value can be
found by calling the <code class="docutils literal notranslate"><span class="pre">getHandle()</span></code> method of a <code class="docutils literal notranslate"><span class="pre">Characteristic</span></code> object.</p>
<p>The <em>data</em> parameter is a <code class="docutils literal notranslate"><span class="pre">str</span></code> (Python 2.x) or <code class="docutils literal notranslate"><span class="pre">bytes</span></code> (Python 3.x) value
containing the notification data. It is recommended you use Python’s <code class="docutils literal notranslate"><span class="pre">struct</span></code>
module to unpack this, to allow portability between language versions.</p>
</dd></dl>

<p>It is recommended that the class used for the delegate object is derived from
<code class="docutils literal notranslate"><span class="pre">btle.DefaultDelegate</span></code>. This will ensure that an appropriate default method
exists for any future calls which may be added to the delegate interface.</p>
<div class="section" id="example-code">
<h3>Example code<a class="headerlink" href="#example-code" title="Permalink to this headline">¶</a></h3>
<p>Code to receive notifications from a peripheral can follow the outline below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">btle</span>

<span class="k">class</span> <span class="nc">MyDelegate</span><span class="p">(</span><span class="n">btle</span><span class="o">.</span><span class="n">DefaultDelegate</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
        <span class="n">btle</span><span class="o">.</span><span class="n">DefaultDelegate</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># ... initialise here</span>

    <span class="k">def</span> <span class="nf">handleNotification</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cHandle</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="c1"># ... perhaps check cHandle</span>
        <span class="c1"># ... process &#39;data&#39;</span>


<span class="c1"># Initialisation  -------</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">btle</span><span class="o">.</span><span class="n">Peripheral</span><span class="p">(</span> <span class="n">address</span> <span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">setDelegate</span><span class="p">(</span> <span class="n">MyDelegate</span><span class="p">(</span><span class="n">params</span><span class="p">)</span> <span class="p">)</span>

<span class="c1"># Setup to turn notifications on, e.g.</span>
<span class="c1">#   svc = p.getServiceByUUID( service_uuid )</span>
<span class="c1">#   ch = svc.getCharacteristics( char_uuid )[0]</span>
<span class="c1">#   ch.write( setup_data )</span>

<span class="c1"># Main loop --------</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">waitForNotifications</span><span class="p">(</span><span class="mf">1.0</span><span class="p">):</span>
        <span class="c1"># handleNotification() was called</span>
        <span class="k">continue</span>

    <span class="nb">print</span> <span class="s2">&quot;Waiting...&quot;</span>
    <span class="c1"># Perhaps do something else here</span>
</pre></div>
</div>
</div>
</div>
<span id="document-assignednumbers"></span><div class="section" id="assigned-numbers">
<span id="assignednumbers"></span><h2>Assigned Numbers<a class="headerlink" href="#assigned-numbers" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">AssignedNumbers</span></code> object is a convenient way to refer to common Bluetooth-related
Assigned Numbers by using textual names. So, for instance <code class="docutils literal notranslate"><span class="pre">AssignedNumbers.firmwareRevisionString</span></code>
is a <code class="docutils literal notranslate"><span class="pre">UUID</span></code> object for the <cite>Firmware Revision String</cite> characteristic identifier (0x2A26).</p>
<p>The complete list of Bluetooth assigned numbers is given at <a class="reference external" href="https://www.bluetooth.com/specifications/assigned-numbers/">https://www.bluetooth.com/specifications/assigned-numbers/</a></p>
<p>The current version of <cite>bluepy</cite> includes the following defined values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">alertNotificationService</span>
<span class="n">batteryLevel</span>
<span class="n">batteryService</span>
<span class="n">bloodPressure</span>
<span class="n">currentTimeService</span>
<span class="n">cyclingPower</span>
<span class="n">cyclingSpeedAndCadence</span>
<span class="n">deviceInformation</span>
<span class="n">deviceName</span>
<span class="n">firmwareRevisionString</span>
<span class="n">genericAccess</span>
<span class="n">genericAttribute</span>
<span class="n">glucose</span>
<span class="n">hardwareRevisionString</span>
<span class="n">healthThermometer</span>
<span class="n">heartRate</span>
<span class="n">humanInterfaceDevice</span>
<span class="n">immediateAlert</span>
<span class="n">linkLoss</span>
<span class="n">locationAndNavigation</span>
<span class="n">manufacturerNameString</span>
<span class="n">modelNumberString</span>
<span class="n">nextDstChangeService</span>
<span class="n">phoneAlertStatusService</span>
<span class="n">referenceTimeUpdateService</span>
<span class="n">runningSpeedAndCadence</span>
<span class="n">scanParameters</span>
<span class="n">serialNumberString</span>
<span class="n">softwareRevisionString</span>
<span class="n">txPower</span>
<span class="n">txPowerLevel</span>
<span class="n">userData</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table of Contents</a></h3>
  <ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-peripheral">The <code class="docutils literal notranslate"><span class="pre">Peripheral</span></code> class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#constructor">Constructor</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#instance-methods">Instance Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#properties">Properties</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-scanner">The <code class="docutils literal notranslate"><span class="pre">Scanner</span></code> class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#constructor">Constructor</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#instance-methods">Instance Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#sample-code">Sample code</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-scanentry">The <code class="docutils literal notranslate"><span class="pre">ScanEntry</span></code> class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#constructor">Constructor</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#instance-methods">Instance Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#properties">Properties</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-delegate">The <code class="docutils literal notranslate"><span class="pre">DefaultDelegate</span></code> class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#constructor">Constructor</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#instance-methods">Instance Methods</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-uuid">The <code class="docutils literal notranslate"><span class="pre">UUID</span></code> class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#constructor">Constructor</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#instance-methods">Instance Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#properties">Properties</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-service">The <code class="docutils literal notranslate"><span class="pre">Service</span></code> class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#constructor">Constructor</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#instance-methods">Instance Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#properties">Properties</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-characteristic">The <code class="docutils literal notranslate"><span class="pre">Characteristic</span></code> class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#constructor">Constructor</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#instance-methods">Instance Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#properties">Properties</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-descriptor">The <code class="docutils literal notranslate"><span class="pre">Descriptor</span></code> class</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-notifications">Working with notifications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#example-code">Example code</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-assignednumbers">Assigned Numbers</a></li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="#">bluepy 0.9.11 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">bluepy 0.9.11 documentation</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, Ian Harvey.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>