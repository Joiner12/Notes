# 室内蓝牙定位—基于RSSI测距

## 序

​	室内蓝牙定位，两外一个说法是低功耗蓝牙定位。主题内容叫室内蓝牙定位，并不意味着这种技术方案只能应用在室内环境下，只是说这种方案现有的大部分应用场景都是在室内。定位的技术方案和手段有很多种，从不同的角度来看有不同的分类方法。就比如说，从用以定位的硬件来区分可以有蓝牙定位、UWB定位、卫星定位等。从测距方式区分的话，有基于距离、角度等。比如，AOA（angle of arrival）\AOD（angle of departure）以及今天准备讨论的基于RSSI测距的定位。

## 定位的重要性和性能要求

​	今天要讲的基于室内RSSI室内蓝牙定位的内容属于整体框架类型。只是对整个算法实现的基本原理和框架进行该概述性地说明，涉及到具体的算法知识后期会深入进行讲解。

​	在开始分享基于RSSI测距室内蓝牙定位之前，先跳出蓝牙定位这个知识体系，往更高一个层次的系统进行一定说明。这个更高层次说的不是高级程度而是系统的复杂性、组成系统元素的多样性，以此来说明定位的重要性，以及对定位功能性能的客观要求。定位在日常生活、高精尖技术中都扮演着重要的作用。机器人是一个复杂的系统，自动驾驶汽车是其中一个比较热门的研究方向，涉及的技术范畴有：环境感知、精准定位、决策与规划、控制与执行等。抽象层面上可以归纳为：感知、决策、执行。上述核心技术需要解决三个核心问题：“我在哪?我要去哪?我该如何去?”。百度Apollo自动驾驶开发套件D-KIT Lite。GPS双天线，组合导航主机、激光雷达、摄像头组成了该系统的感知模块，定位的作用就是回答Where am I的问题。

## 室内定位

### 定位的概念

​	什么是室内定位呢，完整的说法是，室内定位技术是指一种利用无线移动通信网络，通过对接收到的无线电波的一些参数进行测量，根据特定的算法对某一移动终端或个人在某一时间所处的地理位置进行精确测定，以便为移动终端用户提供相关的位置信息服务，或进行实时检测和追踪的定位与导航技术。通信网络、无线电波、算法、位置信息。

### 定位的分类

​	室内定位技术可以分为以下两个大类：一是局域室内定位，如WIFI技术，Zigbee(紫蜂)技术，RFID(射频识别)技术，Bluetooth(蓝牙)技术，UWB(Ultra-Wide Band，超宽带无线电)技术，惯性单元辅助(IMU)定位技术，超声波定位技术，红外线定 位技术，地磁场强，光跟踪定位，计算机视觉定位技术，见下图1。二是广域室内定位，如基于移动通信网络的辅助GPS(A-GPS)，伪卫星(Pseudolite)，地面数字通信及广播网络定位系统TC-OFDM等。不同的定位方案各有其优缺点，对于其性能的评价主要大规模布设成本和定位精度两个方面来进行评价。从这个图中，可以得出以下几点结论：

1. 大规模布设成本和精度成正相关，精度最高布设成本最高的是超带宽定位。
2. 蓝牙定位能够做到m级定位精度，且成本和精度比较平衡。
3. 当前技术前提下，地磁是定位精度最低的定位方式。

## 基于蓝牙RSSI测距定位

​	蓝牙是我们日常生活中接触很多的一种技术，比如手机里面的蓝牙，用来在手机之前传文件（当然现在应用的比较少了）另外一种就是外接蓝牙设备比如蓝牙耳机、手环、手表等。蓝牙技术介绍：

下面这张图是蓝牙的发展过程，蓝牙正式被提出是在1995年，经过几十年技术的革新和发展现在已经到了蓝牙5.2版了，我们现在的设备中普遍还是在蓝牙4.X和5.0。

基于蓝牙RSSI测距定位RSSI(Received Signal Strength Indication)，多点定位方法。无线信号传输中，信号强度随距离变化呈一定规律的衰减（对数路径损耗模型 ），根据采样信号构建路径衰减数学模型，然后将测量过程中的RSSI转换成距离最终计算测量点的位置。根据多个Beacon位置和采样位置推算出真实的位置信息。

### 测距定位系统框架

​	RSSI(Received Signal Strength Indication)，多点定位方法。无线信号传输中，信号强度随距离变化呈一定规律的衰减（对数路径损耗模型 ），根据采样信号构建路径衰减数学模型，然后将测量过程中的RSSI转换成距离最终计算测量点的位置。根据多个Beacon位置和采样位置推算出真实的位置信息。

### 定位算法框架

​	基于蓝牙RSSI测距定位算法系统框架主要由：信号衰减模型建模、蓝牙信号(RSSI)预处理、BSS(Base Station Selector)、三边定位模块、后置位置滤波器几大部分构成。
